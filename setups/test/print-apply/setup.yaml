# ccs-pa setup

# define the devices.xml structure, using the model yamls for dataitems.
# read by pipeline/adapter.
# sources define the inputs to the cache.
# compiled by pipeline/compiler into volumes/agent/devices.xml
# and volumes/agent/agent.cfg.
#. see also devices-future.yaml for future dev.

#. add a meta section

#. could we get this to one line per device? a site might have dozens of machines
# eg set defaults for all devices at the top, overrides per device?

devices:
  - id: pa1 # this is substituted into the model yaml and sources
    name: pa1 # this must match name in agent.cfg and devices.xml
    model: print-apply/ccs # for xml structure - see models/print-apply/ccs/device.xml
    #. shift these up, look for each explicitly
    properties: # these are substituted into the model yaml
      uuid: e05363
      serialNumber: '001'

    # define data sources that feed into this device
    sources:
      - model: print-apply/ccs # model defines inputs and outputs with yaml files
        driver: mqtt-json # type of adapter plugin - manages protocol and payload
        host: broker
        port: 1883

      - model: ladder99/glimpse
        driver: micro
        host: micro
        port: 8888

      # - model: rockwell/hmi
      #   driver: opc
      #   url: opc.tcp://simulator-opc:4334/UA/LittleServer

    destinations: # where to post output - just uses first output for now
      - protocol: shdr
        host: adapter
        port: 7878

  - id: pa2 # this is substituted into the model yaml and sources
    name: pa2 # this must match name in agent.cfg and devices.xml
    model: print-apply/ccs # for xml structure - see models/print-apply/ccs/model.yaml
    properties: # these are substituted into the model yaml
      uuid: e09123
      serialNumber: '002'

    # define data sources that feed into this device
    sources:
      - model: print-apply/ccs # model defines inputs and outputs with yaml files
        driver: mqtt-json # type of adapter plugin - manages protocol and payload
        host: broker
        port: 1883

      # - model: rockwell/hmi
      #   driver: opc
      #   url: opc.tcp://simulator-opc:4334/UA/LittleServer

    destinations: # where to post output - just uses first output for now
      - protocol: shdr
        host: adapter
        port: 7879
