# cache inputs and outputs

# this file is parsed by the adapter driver pipeline/adapter/src/drivers/cpc.js.

cache:
  control_power_warning:
    input: .Autoclave.Alarms.ControlPower\Condition

  control_power_fault:
    input: .Autoclave.Alarms.ControlPower\AlarmActive

  control_power_condition:
    output: "<control_power_fault> ? 'FAULT' : <control_power_warning> ? 'WARNING' : 'NORMAL'"

  operator_name:
    input: .Autoclave.Variables.OperatorName\Value
    output: <operator_name>

  - key: cool_pump_a_hours
    source: .Autoclave.Scripts.MotorHours.CoolPumpAOn\Value

  - key: recipe_description
    source: .Autoclave.RecipeProcessor.Recipe.RecipeData\Description

  - key: vessel_air_temp
    source: .Autoclave.Inputs.AIRTC\Value

  # note: batching allows req-resp protocols to limit the number of
  # data items per request.
  # - key: air_tc # data item alias
  #   source: .Autoclave.AIR_TC\Value # data item path
  #   batch: 1

  # - key: temp_alarm
  #   source: .Autoclave.Alarms.OverTemp\Active
  #   batch: 1

outputs:
  - key: operator_name

  - key: recipe_description
    value: <recipe_description>

  - key: vessel_air_temp
    value: <vessel_air_temp>

  - key: cool_pump_a_hours
    value: <cool_pump_a_hours>
