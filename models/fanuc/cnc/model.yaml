# fanuc cnc model

# this defines the structure of the xml that will get included in devices.xml.
# text substitution is performed, eg ${deviceId} is replaced by
# that value from setup.yaml.
# compilation to devices.xml is done with sh/compile.

model:
  id: ${deviceId} # eg 'f1'
  name: ${deviceId} # must be unique in xml - might want to override in setup.yaml tho?
  uuid: ${uuid} # eg 'e05363af'
  sampleInterval: 10

  description:
    manufacturer: Fanuc
    model: m1
    serialNumber: '${serialNumber}' # eg '001'
    text: Fanuc m1

  dataItems:
    - id: avail
      name: availability
      category: EVENT
      type: AVAILABILITY
      value: types.AVAILABILITY[<connection>]

  components:
    axes:
      axis:
        id: ax
        name: axes

        components:
          rotary:
            id: c1
            name: c

            dataItems:
              - id: sspd
                name: spindle_speed
                category: SAMPLE
                type: SPINDLE_SPEED
                subType: ACTUAL
                units: REVOLUTION/MINUTE
                value: <spindle_speed>

              - id: sovr
                name: spindle_speed_over
                category: SAMPLE
                type: SPINDLE_SPEED
                subType: OVERRIDE
                units: PERCENT
                value: <spindle_speed_over>

              - id: cmode
                name: spindle-mode
                category: EVENT
                type: ROTARY_MODE
                value: <spindle-mode>
                constraints:
                  - SPINDLE
                # <DataItem>
                #   <Constraints>
                #     <Value>SPINDLE</Value>

              # <DataItem category="CONDITION" id="Cloadc" type="LOAD"/>
              - id: cloadc
                name: spindle-load-condition
                category: CONDITION
                type: LOAD
                value: <spindle-load-condition>

                <DataItem category="CONDITION" id="Csystem" type="SYSTEM"/>

                <DataItem category="SAMPLE" id="cl3" name="Cload" nativeUnits="PERCENT" type="LOAD" units="PERCENT"/>



            <Linear id="x1" name="X">
              <DataItems>
                <DataItem category="SAMPLE" id="x2" name="Xact" nativeUnits="MILLIMETER" subType="ACTUAL" type="POSITION" units="MILLIMETER"/>
                <DataItem category="SAMPLE" id="x3" name="Xcom" nativeUnits="MILLIMETER" subType="COMMANDED" type="POSITION" units="MILLIMETER"/>
                <DataItem category="SAMPLE" id="n3" name="Xload" nativeUnits="PERCENT" type="LOAD" units="PERCENT"/>
                <DataItem category="CONDITION" id="Xloadc" type="LOAD"/>
                <DataItem category="CONDITION" id="Xsystem" type="SYSTEM"/>
            <Linear id="y1" name="Y">
              <DataItems>
                <DataItem category="SAMPLE" id="y2" name="Yact" nativeUnits="MILLIMETER" subType="ACTUAL" type="POSITION" units="MILLIMETER"/>
                <DataItem category="SAMPLE" id="y3" name="Ycom" nativeUnits="MILLIMETER" subType="COMMANDED" type="POSITION" units="MILLIMETER"/>
                <DataItem category="SAMPLE" id="y4" name="Yload" nativeUnits="PERCENT" type="LOAD" units="PERCENT"/>
                <DataItem category="CONDITION" id="Yloadc" type="LOAD"/>
                <DataItem category="CONDITION" id="Ysystem" type="SYSTEM"/>
            <Linear id="z1" name="Z">
              <DataItems>
                <DataItem category="SAMPLE" id="z2" name="Zact" nativeUnits="MILLIMETER" subType="ACTUAL" type="POSITION" units="MILLIMETER"/>
                <DataItem category="SAMPLE" id="z3" name="Zcom" nativeUnits="MILLIMETER" subType="COMMANDED" type="POSITION" units="MILLIMETER"/>
                <DataItem category="SAMPLE" id="z4" name="Zload" nativeUnits="PERCENT" type="LOAD" units="PERCENT"/>
                <DataItem category="CONDITION" id="Zloadc" type="LOAD"/>
                <DataItem category="CONDITION" id="Zsystem" type="SYSTEM"/>
            </Linear>
          </Components>
        </Axes>
        <Controller id="cn1" name="controller">
          <DataItems>
            <DataItem category="EVENT" id="msg" type="MESSAGE"/>
            <DataItem category="EVENT" id="estop" type="EMERGENCY_STOP"/>
            <DataItem category="CONDITION" id="clp" type="LOGIC_PROGRAM"/>
            <DataItem category="CONDITION" id="motion" type="MOTION_PROGRAM"/>
            <DataItem category="CONDITION" id="system" type="SYSTEM"/>
          </DataItems>
          <Components>
            <Path id="pth" name="path">
              <DataItems>
                <DataItem category="EVENT" id="cn2" name="block" type="BLOCK"/>
                <DataItem category="EVENT" id="cn3" name="mode" type="CONTROLLER_MODE"/>
                <DataItem category="EVENT" id="cn4" name="line" type="LINE"/>
                <DataItem category="EVENT" id="cn5" name="program" type="PROGRAM"/>
                <DataItem category="EVENT" id="cn6" name="execution" type="EXECUTION"/>
                <DataItem category="EVENT" id="cnt1" name="tool_id" type="TOOL_ID"/>
                <DataItem category="SAMPLE" id="Ppos" nativeUnits="MILLIMETER_3D" subType="ACTUAL" type="PATH_POSITION" units="MILLIMETER_3D"/>
                <DataItem category="SAMPLE" id="Frt" nativeUnits="MILLIMETER/SECOND" type="PATH_FEEDRATE" units="MILLIMETER/SECOND">
                  <Source>path_feedrate</Source>
                </DataItem>
                <DataItem category="SAMPLE" id="Fovr" nativeUnits="PERCENT" type="PATH_FEEDRATE" units="PERCENT">
                  <Source>feed_ovr</Source>
                </DataItem>
              </DataItems>
            </Path>
          </Components>
        </Controller>
        <Systems id="systems" name="systems">
          <Components>
            <Electric id="el" name="electric">
              <DataItems>
                <DataItem category="EVENT" id="p2" name="power" type="POWER_STATE"/>
              </DataItems>
            </Electric>
            <Coolant id="cool" name="coolant">
              <DataItems>
                <DataItem category="CONDITION" id="clow" type="LEVEL"/>
                <DataItem category="CONDITION" id="coolpres" type="PRESSURE"/>
                <DataItem category="CONDITION" id="filter" type="x:FILTER"/>
                <DataItem category="CONDITION" id="coolantmotor" type="ACTUATOR"/>
              </DataItems>
            </Coolant>
            <Hydraulic id="hsys" name="hydrolic">
              <DataItems>
                <DataItem category="CONDITION" id="hlow" type="LEVEL"/>
                <DataItem category="CONDITION" id="hpres" type="PRESSURE"/>
                <DataItem category="CONDITION" id="htemp" type="TEMPERATURE"/>
              </DataItems>
            </Hydraulic>
          </Components>
        </Systems>
      </Components>
    </Device>
  </Devices>
</MTConnectDevices>
