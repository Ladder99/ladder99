import fetch from 'node-fetch'

console.log('hello')

async function foo() {
  // const response = await fetch('https://httpbin.org/stream/3')
  const response = await fetch(
    'http://mtconnect.mazakcorp.com:5717/sample?interval=1000'
  )
  try {
    for await (const chunk of response.body) {
      // console.dir(JSON.parse(chunk.toString()))
      console.log(chunk.toString())
    }
  } catch (err) {
    console.error(err.stack)
  }
}

foo()
