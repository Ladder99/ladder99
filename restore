#!/bin/bash

# restore a backup from ./backup over the current database.
# USAGE
#   ./restore db.sql

FILE=$1
SERVICE=postgres
USER=postgres
DATABASE=postgres

echo Restoring $FILE into $SERVICE, database $DATABASE...

# import sql to a new database
cat $FILE | docker exec -i $SERVICE psql -U $USER $DATABASE

# set new password
# docker exec -i $SERVICE psql -U $USER -d $DATABASE -c "ALTER USER $USER WITH PASSWORD '$PASSWORD';"

# prompt the user for a new password
#. need this because ?
docker exec -i $SERVICE \
  psql --username $USER --database $DATABASE -c "\password"
